!function(){"use strict";var t=angular.module("Contacts");t.directive("contactsMenu",function(){return{restrict:"EA",template:['<div class="contacts-left-group">','    <div id="showRecentContacts" class="selectClick selsect-contacts" ng-click="showRecentContacts()">最近联系人 ( {{ recentContactsLength }} )</div>','    <div id="showContacts"  class="selectClick selsect-contacts" ng-click="showContacts()">全部联系人 ( {{ allContactsLength }} )</div>','    <hr class="left-hr"/>','    <div class="title">',"       <span>自定义组</span>",'       <span class="contacts-groups-icon contacts-groups-create1" ng-click="createGroup()"></span>',"   </div>",'   <div class="contacts-groups-list">','       <div class="item selectClick" id="{{group.id}}" ng-repeat="group in contactsGroups">','           <span ng-click="showGroup(group)" class="contacts-groups-span"><span class="group-name" title="{{group.name}}">{{ group.name }}</span><span class="group-num">({{ group.membersKey.length }})</span></span>','           <span class="contacts-groups-icon contacts-groups-icon-delete" ng-click="deleteGroup(group)"></span>','           <span class="contacts-groups-icon contacts-groups-edit" ng-click="editGroup(group)"></span>',"       </div>","   </div>","</div>"].join(""),controller:["$scope","$state","$http","$element","contactsService","mAlert",function(t,n,e,c,s,o){t.addContact=function(){n.go("contacts.add")},t.showContacts=function(){n.go("contacts.list",{requestType:"allContacts"})},t.showRecentContacts=function(){n.go("contacts.list",{requestType:"recentContacts"})},t.showGroup=function(t){n.go("contacts.list",{requestType:"showGroup",gId:t.id})},t.deleteGroup=function(n){o.alert({title:"提示",body:'确定要删除"'+n.name+'"？',btns:[{"class":"btn-sure",text:"确定",cb:function(){s.deleteGroupById(n.id,function(){t.$update(),t.$broadcast("groupHasDeleted")})}},{"class":"btn-cancle",text:"取消"}]})},t.editGroup=function(t){n.go("contacts.editGroup",{gId:t.id})},t.createGroup=function(t){n.go("contacts.newGroup")}}]}}),t.directive("contactsContent",function(){return{restrict:"E",template:['<div class="contacts-content">','  <ul><li ng-repeat="item in contacts">{{ item.name }}</li></ul>',"</div>"].join(""),controller:["$scope","$state",function(t,n){t.contacts=[{name:"自定义分组"},{name:"同事"},{name:"Family"}]}]}}),t.directive("intentionBar",function(){return{restrict:"E",template:['<div class="contacts-intention-bar">','<input type="button" class="nav-card-1 yellow-bg-btn" value="保存">','<input type="button" class="nav-card-1" value="返回" onclick="history.go(-1)">',"</div>"].join(""),controller:["$scope","$state",function(t,n){}]}}),t.directive("selectFile",["mAlert",function(t){return{restrict:"E",transclude:!0,replace:!0,template:"<div ng-transclude></div>",link:function(n,e,c){var s=angular.element("#inputImage")[0],o=window.URL||window.webkitURL;o?s.onchange=function(){var e=this.files;if(e&&e.length){var c=/.csv/g;c.test(e[0].name)?n.fileName=e[0].name:(n.fileName="未选择任何文件",t.msg({type:"error",msg:"导入的文件必须是 .csv 格式的"})),n.$apply()}}:s.onchange=function(){var e=this.value,c=/csv/g;/^\s*$/.test(this)||(e=e.substring(e.lastIndexOf("\\")+1,e.length));try{var s=e.substring(e.lastIndexOf(".")+1,e.length);c.test(s)?n.fileName=e:(n.fileName="未选择任何文件",t.msg({type:"error",msg:"导入的文件必须是 .csv 格式的"})),n.$apply()}catch(s){}}}}}])}();