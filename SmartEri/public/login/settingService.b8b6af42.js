!function(){"use strict";var e=angular.module("SettingModule");e.factory("setTimeService",["timeFunction",function(e){var t=9,n=10,r=(new Date).getFullYear(),o=e.getDate(),i=e.getsubDate(o,1);return{startYear:{value:o.year,id:"stratYear",list:e.getYearLast(r,r+t)},startMonth:{value:o.month,id:"stratMonth",list:["01","02","03","04","05","06","07","08","09","10","11","12"]},stratDay:{value:o.day,id:"startDay",list:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},endYear:{value:i[0],id:"endYear",list:e.getYearLast(r,r+n)},endMonth:{value:i[1],id:"endMonth",list:["01","02","03","04","05","06","07","08","09","10","11","12"]},endDay:{value:i[2],id:"endDay",list:["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"]},setDateMessage:function(e,t,n){t&&(e.setEndYear.value=t.date[0],e.setEndMonth.value=t.date[1],e.setEndDay.value=t.date[2],e.showreminder=t.reminder,e.showreminder&&n.msg({type:"error",msg:e.showreminder}))}}}]),e.factory("setReceiveRuleService",function(){return{filterOptions:function(e,t){for(var n=[],r=0,o=e.length;o>r;r++)!function(r){var o={};o.condition=t.isStart[e[r][0]],o.filterTheme=t.body[e[r][1]],o.filterContent=e[r][2],o.filterKeyword=t.logic[e[r][3]],o.moveSite=t.moveTo[e[r][4]],n.push(o)}(r);return n},initRule:function(e,t){e.newRuleAddress="",e.newRuleTheme="",e.newRuleContent="",e.selectSite.value="包含",e.selectTheme.value="包含",e.selectContent.value="包含",e.selectMoveSite.value="收件箱",e.initNewRule.title=t,e.initNewRule.conditionOpen=!0,e.initNewRule.conditionClose=!1,e.initNewRule.bodyToAddress=!0,e.initNewRule.bodyToTheme=!1,e.initNewRule.bodyToContent=!1,e.newRule.isStart=1,e.newRule.body=0,e.newRule.logic=0,e.footer.falseReturn=!0},selectSite:{value:"包含",id:"selectSite",list:["包含","不包含","等于","不等于"]},selectTheme:{value:"包含",id:"selectTheme",list:["包含","不包含","等于","不等于"]},selectContent:{value:"包含",id:"selectContent",list:["包含","不包含","等于","不等于"]},selectMoveSite:{value:"收件箱",id:"selectMoveSite",list:["收件箱","已删除","垃圾邮件"]}}}),e.factory("setFilterMap",function(){return{isStart:{0:"否",1:"是"},body:{0:"主题",1:"发件人",2:"正文"},logic:{0:"包含",1:"不包含",2:"等于",4:"不等于"},moveTo:{1:"收件箱",4:"已删除",5:"垃圾邮件"},getVlaueToKey:function(e,t){for(var n in t)if(t[n]===e)return n;return!1},filterNewRuleBody:{0:{logic:"selectSite",text:"newRuleAddress"},1:{logic:"selectTheme",text:"newRuleTheme"},2:{logic:"selectContent",text:"newRuleContent"}}}}),e.factory("setPublicMethod",function(){return{mailVerify:function(e){var t=/^[_a-z\d\-\.\/]+@[_a-z\d\-]+(\.[_a-z\d\-]+)*(\.(info|biz|com|edu|gov|net|am|bz|cn|cx|hk|jp|tw|vc|vn))$/;return t.test(e)},regionVerify:function(e){var t=/^@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return t.test(e)},filterContent:function(e){var t=/,/g;return t.test(e)},checkNum:function(e){return e.replace(/\D/g,"")},checkTel:function(e){return e.replace(/[^-|0-9]/g,"")},checkPhone:function(e){var t=/^1[3,5,7,8]\d{9}$/g;return t.test(e)},filterMail:function(e){var t=/[^.|@|a-z|A-Z|0-9|_-]/g;return e.replace(t,"")},containSpecial:function(e){var t=new RegExp("[`~!@#$^&*()=|{}':;',\\[\\].<>/?~！@#￥……&*（）——|{}【】‘；：”“'。，、？\\s]");return t.test(e)},bytesToSize:function(e,t,n){if(n||isNaN(e))return e;if(t||0===t||(t=2),isNaN(e)||0>e)return 0;if(0===e)return"0";var r,o=1024,i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];return r=Math.floor(Math.log(e)/Math.log(o)),(e/Math.pow(o,r)).toFixed(t)+" "+i[r]},clone:function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array){for(var t=[],n=0,r=e.length;r>n;++n)t[n]=this.clone(e[n]);return t}if(e instanceof Object){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=this.clone(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},POPService:function(e){var t=/@([^@]+)$/g,n="pop3.";return t.test(e)?(e.replace(t,function(){n+=arguments[1]}),n):""},getCookie:function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):""},getUserId:function(){return window.localStorage?localStorage.getItem("userid")||null:null},getCity:function(e,t){var n=[],r=t.concat([]);e=this.saveCity(e,t);for(var o in e){var i={},t=r.concat([]);t.push(o),i.city=t,i.value=e[o],n.push(i)}return n},saveCity:function(e,t){return t&&t.length>0?(e=e[t.shift()],this.saveCity(e,t)):e},setlocalStorage:function(e){var t=!0;if(window.localStorage){for(var n=JSON.parse(localStorage.getItem("weather"))||[],r=0,o=n.length;o>r;r++)if(e.userid===n[r].userid){n[r].cityCode=e.cityCode,t=!1;break}t&&n.push(e),localStorage.setItem("weather",JSON.stringify(n))}},getlocalStorage:function(e){if(window.localStorage){var t="",n=JSON.parse(localStorage.getItem("weather"));if(n)for(var r=0,o=n.length;o>r;r++)if(e===n[r].userid){t=n[r].cityCode;break}return t}},removeRepet:function(e){var t=[],n=0;if(sohu.mail.utils.isArray(e)){for(t=e.sort();n<t.length-1;)t[n]===t[n+1]?t.splice(n,1):n++;return t}},unique:function(e){var t=[];e:for(var n=0,r=e.length;r>n;n++){for(var o=n+1;r>o;o++)if(e[o].text===e[n].text)continue e;t.push(e[n])}return t},brower:function(){var e=window,t=e.opera?opera.version().replace(/\d$/,"")-0:parseFloat((/(?:IE |fox\/|ome\/|ion\/)(\d+\.\d)/.exec(navigator.userAgent)||[,0])[1]);return{ie:!!e.VBArray&&Math.max(document.documentMode||0,t),firefox:!!e.netscape&&t,opera:!!e.opera&&t,chrome:!!e.chrome&&t,safari:/apple/i.test(navigator.vendor)&&t}},htmlTransferredMeaning:function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},meaningTransferredHtml:function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">")},securityFilter:function(e){return e},EventUtil:{addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target|e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener("type",n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},stopPrpagation:function(e){e.stopPropagation,e.stopPropagation()}}}})}();